<script>
    const MOBILE = 768, DEFAULT_CALL_TYPE = 1, CAR_DETAIL_TYPE = 2, PICK_UP_TYPE = 3;
    document.addEventListener('DOMContentLoaded', () => {
        formatAllNumber();
        IMask(document.getElementById('phone-modal'), {
            mask: '+{7} (000) 000-00-00'
        });
    });

    function sendMessage(message) {
        setNotifyCard();
        fetch('{{ path('app_send_tg_message') }}', {
            method: 'POST',
            body: JSON.stringify({
                message: getBaseText() + message
            })
        });
        ym(96406175,'reachGoal','lead');
    }

    function setNotifyCard() {
        let notifyCard = document.querySelector('#notify-card');
        if(notifyCard.style.opacity == '0') {
            notifyCard.style.opacity = '100%';
            setTimeout(() => {
                notifyCard.style.opacity = '0';
            }, 10000);
        }
    }

    function closeNotifyCard(){
        document.querySelector('#notify-card').style.opacity = '0';
    }

    function getBaseText() {
        return `Заказ звонка\n`;
    }
</script>
